<!DOCTYPE html>
<html lang="ro-Ro">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Game</title>
    <style>
        body{ background-color: black; }
        h3{ font-size: 25px; color: white; margin: 15px; margin-top: 25px; margin-bottom: 25px; margin-left: 55px; word-spacing: 60px; }
        .btn-move{ height: 100px; width: 100px; background-color: transparent; margin-left: 35px; border-radius: 60px; border: 3px solid white; cursor: pointer;}
        .btn-ico{ height: 50px; }
        .js-result{ color: white; font-size: 20px; font-weight: bold;}
        .js-moves{ color:white; font-weight: bold;}
        .js-score{ color: white; font-size: 20px; font-weight: bold;}
        .reset-btn{ font-size: 15px; margin: 0px 25px; border:red solid 1px; border-radius: 50px; padding: 5px 25px 5px 25px; cursor: pointer;}
    </style>
</head>
<body>
    <h3>Piatra Hartie Foarfeca</h3>

    <button onclick =" playGame('Piatra');" class="btn-move"><img src="rock.png" class="btn-ico"></button>

    <button onclick =" playGame('Hartie');" class="btn-move"><img src="paper.png" class="btn-ico"></button>

    <button onclick =" playGame('Foarfeca');" class="btn-move"><img src="scissors.png" class="btn-ico"></button>

    <p class="js-result"></p>

    <p class="js-moves"></p>

    <p class="js-score"></p>

    <button onclick="score.Castigate = 0; score.Pierdute = 0; score.Egal= 0; updateScore();" class="reset-btn">Reset score</button>


    <script>
        const score = JSON.parse(localStorage.getItem('score'));

        console.log(localStorage.getItem('score'));

        updateScore();

        function playGame(playerMove){

                    const compMove = pickComputerMove();
                    let rezultat = '';

                    if (playerMove === 'Foarfeca'){
                        if (compMove === 'Foarfeca') {rezultat = 'Egal';}
                        else if (compMove === 'Hartie') {rezultat = 'Ai castigat!';}
                        else if (compMove === 'Piatra') {rezultat = 'Ai pierdut!';}

                    }else if (playerMove === 'Hartie'){
                        if (compMove === 'Hartie') {rezultat = 'Egal';}
                        else if (compMove === 'Piatra') {rezultat = 'Ai castigat!';}
                        else if (compMove === 'Foarfeca') {rezultat = 'Ai pierdut!';}

                    }else if(playerMove === 'Piatra'){
                        if (compMove === 'Piatra') {rezultat = 'Egal';}
                        else if (compMove === 'Hartie') {rezultat = 'Ai pierdut!';}
                        else if (compMove === 'Foarfeca') {rezultat = 'Ai castigat!';}
                    }

                    if(rezultat === 'Ai castigat!'){
                        score.Castigate += 1;
                    }else if(rezultat === 'Ai pierdut!'){
                        score.Pierdute += 1;
                    }else if(rezultat === 'Egal'){
                        score.Egal += 1;
                    }

                    /*save data - local. localStorage only supports strings*/
                    localStorage.setItem('score', JSON.stringify(score));

                    /*alert(`Ai ales ${playerMove}. Computer a ales ${compMove}. ${rezultat} ,
                     Castigate: ${score.Castigate}, Pierdute: ${score.Pierdute}, Egal: ${score.Egal}` );*/

                    updateScore();

                    document.querySelector('.js-result').innerHTML = rezultat;

                    document.querySelector('.js-moves').innerHTML = `You ${playerMove} - ${compMove} Computer`;
                     
        }

        function pickComputerMove(){
            const nrA = Math.random();

            let compMove = '';
                    if(nrA >= 0  && nrA < 1/3) {compMove = 'Piatra';}
                    else if (nrA >= 1/3 && nrA < 2/3) {compMove = 'Hartie';}
                    else if (nrA >= 2/3 && nrA <1) {compMove = 'Foarfeca';}

                    return compMove;
        }

        function updateScore(){
            document.querySelector('.js-score').innerHTML = `Castigate: ${score.Castigate}, Pierdute: ${score.Pierdute}, Egal: ${score.Egal}`;

        }

    </script>
</body>

</html>